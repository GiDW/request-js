"use strict";!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.RequestJs=t()}("undefined"!=typeof self?self:this,function(){var t,b,E,I="accept",v="content-type";function x(e,n){var r,o,s,u,a,t,i,f,c,d,l,p,h,m,O,R,T,g;if(u=O=m=r=!1,j(e))o={url:e};else{if(!C(e)||!j(e.url))return void y(x.ERR_INVALID_CONFIG);o=e}if(t=o.url,"number"==typeof o.timeout&&0<o.timeout&&(s=setTimeout(function(){r||(u=!0,a.abort(),y({data:"",config:o,status:0,statusText:"",headers:"",requestStatus:x.TIMEOUT}))},o.timeout)),(a=new window.XMLHttpRequest).onreadystatechange=function(){var t,e;if(a&&4===a.readyState)if(g=1223===a.status?204:a.status,T="response"in a?a.response:a.responseText,0===g&&(g=T?200:"file:"===function(e){var t;t=e,b&&(E.setAttribute("href",t),t=E.href);return E.setAttribute("href",t),{href:E.href,protocol:E.protocol,host:E.host,search:E.search,hash:E.hash,hostname:E.hostname,port:E.port,pathname:E.pathname}}(o.url).protocol?404:0),t={data:T,config:o,status:g,statusText:a.statusText||"",headers:a.getAllResponseHeaders()},200<=g&&g<300)if(!0===o.json&&j(T))try{e=JSON.parse(T),t.data=e,t.requestStatus=x.COMPLETED,y(null,t)}catch(e){t.requestStatus=x.ERROR,y(t)}else t.requestStatus=x.COMPLETED,y(null,t);else t.requestStatus=u?x.TIMEOUT:x.ERROR,y(t)},(i=function(e){var t,n,r,o,s,u;if(!C(e))return;for(t=[],n=Object.keys(e),r=n.length,o=0;o<r;o++)s=encodeURIComponent(n[o]),q(u=e[s])&&(Array.isArray(u)?S(t,s,u):t.push(s+"="+encodeURIComponent(A(u))));return t.join("&")}(o.params))&&(t+=0<t.indexOf("?")?"&":"?",t+=i),R=o.method?o.method.toUpperCase():"GET",a.open(R,t,!0),C(o.headers))for(p=(f=Object.keys(o.headers)).length,h=0;h<p;h++)d=(c=f[h]).toLowerCase(),l=o.headers[c],m||d!==I||(m=!0),O||d!==v||(O=!0),void 0!==l&&a.setRequestHeader(c,l);return m||a.setRequestHeader(I,"application/json, text/plain, */*"),"POST"!==R&&"PUT"!==R&&"PATCH"!==R||O||a.setRequestHeader(v,"application/json;charset=utf-8"),a.send(void 0!==o.data?o.data:null),{abort:function(){a&&a.abort()}};function y(e,t){r||(r=!0,clearTimeout(s),function(){a&&(a.onreadystatechange=null);a=null}(),"function"==typeof n&&n(e,t))}}function a(e,t,n){t&&(e[t]=e[t]?e[t]+", "+n:n)}function S(e,t,n){var r,o;for(o=n.length,r=0;r<o;r++)q(n[r])&&e.push(t+"="+encodeURIComponent(A(n[r])))}function C(e){return"object"==typeof e&&null!==e}function j(e){return"string"==typeof e&&0<e.length}function q(e){return e&&"function"!=typeof e}function A(e){return C(e)?"[object Date]"===Object.prototype.toString.call(e)?e.toISOString:JSON.stringify(e):e}return t=window.navigator.userAgent,b=function(){var e;if(0<(e=t.indexOf("MSIE ")))return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(0<(e=t.indexOf("Trident/")))return e=t.indexOf("rv:"),parseInt(t.substring(e+3,t.indexOf(".",e)),10);return 0}(),E=document.createElement("a"),x.ERR_INVALID_CONFIG="Invalid config",x.ERROR="error",x.ABORTED="aborted",x.TIMEOUT="timeout",x.COMPLETED="completed",x.get=function(e,t,n){var r;return C(r=n)||(r={}),r.url=e,x(r,t)},x.post=function(e,t,n,r){var o;return C(o=r)||(o={}),o.method="POST",o.url=e,o.data=t,x(o,n)},x.parseHeaders=function(e){var t,n,r,o,s,u;if(t={},j(e))for(s=(n=e.trim().split("\n")).length,o=0;o<s;o++)u=(r=n[o]).indexOf(":"),a(t,r.substr(0,u).trim().toLowerCase(),r.substr(u+1).trim());else if(C(e))for(s=(n=Object.keys(e)).length,o=0;o<s;o++)a(t,(r=n[o]).toLowerCase(),e[r].trim());return t},x});