"use strict";!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.RequestJs=e()}("undefined"!=typeof self?self:this,function(){var e,b,E,I="accept",v="content-type";function x(n,r){var o,s,a,u,t,e,i,f,c,d,l,p,h,m,O,R,T;if(a=m=h=o=!1,C(n)&&j(n.url)){var g;if("number"==typeof(g=n.timeout)&&isFinite(g)&&0<n.timeout&&(s=setTimeout(function(){o||(a=!0,u.abort(),y({data:"",config:n,status:0,statusText:"",headers:"",requestStatus:x.TIMEOUT}))},n.timeout)),(u=new window.XMLHttpRequest).onreadystatechange=function(){var e,t;if(u&&4===u.readyState)if(T=1223===u.status?204:u.status,R="response"in u?u.response:u.responseText,0===T&&(T=R?200:"file:"===function(t){var e;e=t,b&&(E.setAttribute("href",e),e=E.href);return E.setAttribute("href",e),{href:E.href,protocol:E.protocol,host:E.host,search:E.search,hash:E.hash,hostname:E.hostname,port:E.port,pathname:E.pathname}}(n.url).protocol?404:0),e={data:R,config:n,status:T,statusText:u.statusText||"",headers:u.getAllResponseHeaders()},200<=T&&T<300)if(!0===n.json&&j(R))try{t=JSON.parse(R),e.data=t,e.requestStatus=x.COMPLETED,y(null,e)}catch(t){e.requestStatus=x.ERROR,y(e)}else e.requestStatus=x.COMPLETED,y(null,e);else e.requestStatus=a?x.TIMEOUT:x.ERROR,y(e)},t=n.url,(e=function(t){var o,e,n,r,s,a;if(!C(t))return;for(o=[],e=Object.keys(t),n=e.length,r=0;r<n;r++)s=encodeURIComponent(e[r]),q(a=t[s])&&(Array.isArray(a)?u(s,a):o.push(s+"="+encodeURIComponent(A(a))));return o.join("&");function u(t,e){var n,r;for(r=e.length,n=0;n<r;n++)q(e[n])&&o.push(t+"="+encodeURIComponent(A(e[n])))}}(n.params))&&(t+=0<t.indexOf("?")?"&":"?",t+=e),O=n.method?n.method.toUpperCase():"GET",u.open(O,t,!0),C(n.headers))for(l=(i=Object.keys(n.headers)).length,p=0;p<l;p++)c=(f=i[p]).toLowerCase(),d=n.headers[f],h||c!==I||(h=!0),m||c!==v||(m=!0),S(d)&&u.setRequestHeader(f,d);return h||u.setRequestHeader(I,"application/json, text/plain, */*"),"POST"!==O&&"PUT"!==O&&"PATCH"!==O||m||u.setRequestHeader(v,"application/json;charset=utf-8"),u.send(S(n.data)?n.data:null),{abort:function(){u&&u.abort()}}}function y(t,e){o||(o=!0,clearTimeout(s),function(){u&&(u.onreadystatechange=null);u=null}(),"function"==typeof r&&r(t,e))}y(x.ERR_INVALID_CONFIG)}function S(t){return void 0!==t}function C(t){return"object"==typeof t&&null!==t}function j(t){return"string"==typeof t&&0<t.length}function q(t){return t&&"function"!=typeof t}function A(t){return C(t)?(e=t,"[object Date]"===Object.prototype.toString.call(e)?t.toISOString:JSON.stringify(t)):t;var e}return e=window.navigator.userAgent,b=function(){var t;if(0<(t=e.indexOf("MSIE ")))return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<(t=e.indexOf("Trident/")))return t=e.indexOf("rv:"),parseInt(e.substring(t+3,e.indexOf(".",t)),10);return 0}(),E=document.createElement("a"),x.ERR_INVALID_CONFIG="Invalid config",x.ERROR="error",x.ABORTED="aborted",x.TIMEOUT="timeout",x.COMPLETED="completed",x.get=function(t,e,n){var r;return C(r=n)||(r={}),r.url=t,x(r,e)},x.post=function(t,e,n,r){var o;return C(o=r)||(o={}),o.method="POST",o.url=t,o.data=e,x(o,n)},x.parseHeaders=function(t){var n,e,r,o,s,a;if(n={},j(t))for(s=(e=t.trim().split("\n")).length,o=0;o<s;o++)a=(r=e[o]).indexOf(":"),u(r.substr(0,a).trim().toLowerCase(),r.substr(a+1).trim());else if(C(t))for(s=(e=Object.keys(t)).length,o=0;o<s;o++)u((r=e[o]).toLowerCase(),t[r].trim());return n;function u(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}},x});