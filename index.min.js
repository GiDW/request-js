"use strict";!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.RequestJs=e()}("undefined"!=typeof self?self:this,function(){var e,E,I;function b(r,n){var o,s,u,a,t,e,i,f,c,d,p,l,h,O,m,T,R;if(u=O=h=o=!1,S(r)&&C(r.url)){var g;if(g=r.timeout,isFinite(g)&&0<r.timeout&&(s=setTimeout(function(){o||(u=!0,a.abort(),y({data:"",config:r,status:0,statusText:"",headers:"",requestStatus:b.TIMEOUT}))},r.timeout)),(a=new window.XMLHttpRequest).onreadystatechange=function(){var e,t;if(a&&4===a.readyState)if(R=1223===a.status?204:a.status,T="response"in a?a.response:a.responseText,0===R&&(R=T?200:"file:"===function(t){var e;if(!C(t))return;e=t,E&&(I.setAttribute("href",e),e=I.href);return I.setAttribute("href",e),{href:I.href,protocol:I.protocol,host:I.host,search:I.search,hash:I.hash,hostname:I.hostname,port:I.port,pathname:I.pathname}}(r.url).protocol?404:0),e={data:T,config:r,status:R,statusText:a.statusText||"",headers:a.getAllResponseHeaders()},200<=(n=R)&&n<300)if(!0===r.json&&C(T))try{t=JSON.parse(T),e.data=t,e.requestStatus=b.COMPLETED,y(null,e)}catch(t){e.requestStatus=b.ERROR,y(e)}else e.requestStatus=b.COMPLETED,y(null,e);else e.requestStatus=u?b.TIMEOUT:b.ERROR,y(e);var n},t=r.url,(e=function(t){var o,e,n,r,s,u;if(!S(t))return;for(o=[],e=Object.keys(t),n=e.length,r=0;r<n;r++)s=encodeURIComponent(e[r]),j(u=t[s])&&(Array.isArray(u)?a(s,u):o.push(s+"="+encodeURIComponent(A(u))));return o.join["&"];function a(t,e){var n,r;for(r=e.length,n=0;n<r;n++)j(e[n])&&o.push(t+"="+encodeURIComponent(A(e[n])))}}(r.params))&&(t+=0<t.indexOf("?")?"&":"?",t+=e),m=r.method?r.method.toUpperCase():"GET",a.open(m,t,!0),S(r.headers))for(p=(i=Object.keys(r.headers)).length,l=0;l<p;l++)c=(f=i[l]).toLowerCase(),h||"accept"!==c||(h=!0),O||"content-type"!==c||(O=!0),v(d=r.headers[f])&&a.setRequestHeader(f,d);return h||a.setRequestHeader("Accept","application/json, text/plain, */*"),"POST"!==m&&"PUT"!==m&&"PATCH"!==m||O||a.setRequestHeader("Content-Type","application/json;charset=utf-8"),a.send(v(r.data)?r.data:null),{abort:function(){a&&a.abort()}}}function y(t,e){!o&&x(n)&&(o=!0,clearTimeout(s),function(){a&&(a.onreadystatechange=null);a=null}(),n(t,e))}y(b.ERR_INVALID_CONFIG)}function v(t){return void 0!==t}function S(t){return"object"==typeof t&&null!==t}function x(t){return"function"==typeof t}function C(t){return"string"==typeof t&&0<t.length}function j(t){return t&&"function"!=typeof t}function i(t,e){var n,r,o,s,u,a;if(S(t)&&S(e))for(o=(n=Object.keys(e)).length,r=0;r<o;r++)u=t[s=n[r]],a=e[s],t[s]=S(u)&&S(a)?i(u,a):a;return t}function A(t){return S(t)?(e=t,"[object Date]"===Object.prototype.toString.call(e)?t.toISOString:JSON.stringify(t)):t;var e}return e=window.navigator.userAgent,E=function(){var t;if(0<(t=e.indexOf("MSIE ")))return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<(t=e.indexOf("Trident/")))return t=e.indexOf("rv:"),parseInt(e.substring(t+3,e.indexOf(".",t)),10);return 0}(),I=document.createElement("a"),b.ERR_INVALID_CONFIG="Invalid config",b.ERROR="error",b.ABORTED="aborted",b.TIMEOUT="timeout",b.COMPLETED="completed",b.get=function(t,e,n){if(x(e))return b(i({method:"GET",url:t},n),e)},b.post=function(t,e,n,r){if(x(n))return b(i({method:"POST",url:t,data:e},r),n)},b});