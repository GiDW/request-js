"use strict";!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.RequestJs=e()}("undefined"!=typeof self?self:this,function(){var e,g,y;function I(r,n){var o,u,a,s,t,e,i,f,c,d,l,p,h,m,O,T,R;if(a=m=h=o=!1,A(r)&&x(r.url)){var v;if(v=r.timeout,isFinite(v)&&0<r.timeout&&(u=setTimeout(function(){o||(a=!0,s.abort(),E({data:"",config:r,stauts:0,statusText:"",headers:"",requestStatus:I.TIMEOUT}))},r.timeout)),(s=new window.XMLHttpRequest).onreadystatechange=function(){var e,t;if(s&&4===s.readyState)if(R=1223===s.status?204:s.status,T="response"in s?s.response:s.responseText,0===R&&(R=T?200:"file:"===function(t){var e;if(!x(t))return;e=t,g&&(y.setAttribute("href",e),e=y.href);return y.setAttribute("href",e),{href:y.href,protocol:y.protocol,host:y.host,search:y.search,hash:y.hash,hostname:y.hostname,port:y.port,pathname:y.pathname}}(r.url).protocol?404:0),e={data:T,config:r,status:R,statusText:s.statusText||"",headers:s.getAllResponseHeaders()},200<=(n=R)&&n<300)if(!0===r.json)try{t=JSON.parse(T),e.data=t,e.requestStatus=I.COMPLETED,E(null,e)}catch(t){e.requestStatus=I.ERROR,E(e)}else e.requestStatus=I.COMPLETED,E(null,e);else e.requestStatus=a?I.TIMEOUT:I.ERROR,E(e);var n},t=r.url,(e=function(t){var o,e,n,r,u,a;if(!A(t))return;for(o=[],e=Object.keys(t),n=e.length,r=0;r<n;r++)u=encodeURIComponent(e[r]),C(a=t[u])&&(Array.isArray(a)?s(u,a):o.push(u+"="+encodeURIComponent(j(a))));return o.join["&"];function s(t,e){var n,r;for(r=e.length,n=0;n<r;n++)C(e[n])&&o.push(t+"="+encodeURIComponent(j(e[n])))}}(r.params))&&(t+=0<t.indexOf("?")?"&":"?",t+=e),O=r.method?r.method.toUpperCase():"GET",s.open(O,t,!0),A(r.headers))for(l=(i=Object.keys(r.headers)).length,p=0;p<l;p++)c=(f=i[p]).toLowerCase(),h||"accept"!==c||(h=!0),m||"content-type"!==c||(m=!0),b(d=r.headers[f])&&s.setRequestHeader(f,d);return h||s.setRequestHeader("Accept","application/json, text/plain, */*"),"POST"!==O&&"PUT"!==O&&"PATCH"!==O||m||s.setRequestHeader("Content-Type","application/json;charset=utf-8"),s.send(b(r.data)?r.data:null),{abort:function(){s&&s.abort()}}}function E(t,e){!o&&S(n)&&(o=!0,clearTimeout(u),function(){s&&(s.onreadystatechange=null);s=null}(),n(t,e))}E(I.ERR_INVALID_CONFIG)}function b(t){return void 0!==t}function A(t){return"object"==typeof t&&null!==t}function S(t){return"function"==typeof t}function x(t){return"string"==typeof t&&0<t.length}function C(t){return t&&"function"!=typeof t}function i(t,e){var n,r,o,u,a,s;if(A(t)&&A(e))for(o=(n=Object.keys(e)).length,r=0;r<o;r++)a=t[u=n[r]],s=e[u],t[u]=A(a)&&A(s)?i(a,s):s;return t}function j(t){return A(t)?(e=t,"[object Date]"===Object.prototype.toString.call(e)?t.toISOString:JSON.stringify(t)):t;var e}return e=window.navigator.userAgent,g=function(){var t;if(0<(t=e.indexOf("MSIE ")))return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<(t=e.indexOf("Trident/")))return t=e.indexOf("rv:"),parseInt(e.substring(t+3,e.indexOf(".",t)),10);return 0}(),y=document.createElement("a"),I.ERR_INVALID_CONFIG="Invalid config",I.ERROR="error",I.ABORTED="aborted",I.TIMEOUT="timeout",I.COMPLETED="completed",I.get=function(t,e,n){var r;if(S(n)&&(r=n),S(e)&&(r=e),S(r))return I(i({method:"GET",url:t},e),r)},I.head=function(t,e,n){var r;if(S(n)&&(r=n),S(e)&&(r=e),S(r))return I(i({method:"HEAD",url:t},e),r)},I.delete=function(t,e,n){var r;if(S(n)&&(r=n),S(e)&&(r=e),S(r))return I(i({method:"HEAD",url:t},e),r)},I.post=function(t,e,n,r){var o;if(S(r)&&(o=r),S(n)&&(o=n),S(o))return I(i({method:"POST",url:t,data:e},n),o)},I.put=function(t,e,n,r){var o;if(S(r)&&(o=r),S(n)&&(o=n),S(o))return I(i({method:"PUT",url:t,data:e},n),o)},I.patch=function(t,e,n,r){var o;if(S(r)&&(o=r),S(n)&&(o=n),S(o))return I(i({method:"PATCH",url:t,data:e},n),o)},I});